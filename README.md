## Обзор

Проект по автоматической параллельной прошивке микроконтроллеров через программаторы J-link

## Предустановки

- установленный пакет ansible
- в корне проекта должен находиться архив openocd.tar.gz, который можно скачать с https://openocd.org/
- отсутствие /dev/ttyUSBx в системе, не являющихся портами отладки
(так как minicom откроется для всех /dev/ttyUSBx)
- для установки openocd следует запустить:

```
ansible-playbook install.yml
```
А после завершения работы скрипта нужно перелогиниться, так как пользователь был добавлен в группу dialout.
install.yml нужно запустить только 1 раз, чтобы установить openocd.

## Запуск

```
ansible-playbook flash.yml -e firmware_full_path="/full/path/to/firmware.bin" -e target_cfg="config_file.cfg"
```
target_cfg - имя файла конфигурации в openocd/tcl/target

## Итог работы скрипта

- в случае успешной прошивки откроется окно терминала minicom для каждого J-link (/dev/ttyUSBx) в системе, в которых появятся сообщения о загрузке новой прошивки.

## Примечания

- в случае неудачного выполнения скрипта в системе могут остаться процессы openocd
